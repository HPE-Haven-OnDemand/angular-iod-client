"use strict";function ReqBodyData(a){var b=this;b.params={},_.map(a,function(a,c){void 0!=a&&(b.params[c]=a)})}function ReqQueryParams(a){var b=this;b.params={},_.map(a,function(a,c){void 0!=a&&(b.params[c]=a)})}function EventsQueryParams(a){StatisticsQueryParams.call(this,a)}function MeasureQueryParams(a){StatisticsQueryParams.call(this,a)}function StatisticsQueryParams(a){ReqQueryParams.call(this,a)}function IodConnectorService(a,b){function c(b,c,d,e,f,g,h,i,j){var k="connector/"+encodeURIComponent(c)+"/v1",n=void 0!==i?i:{};switch(b){case l.WEB:case l.SHAREPOINT:n.url=d;break;case l.FS:n.directoryPathCSVs=d}var o=n,p={action:m.ADD_TO_INDEX,index:e},q=new ReqBodyData;if(q.append({config:o}),q.append({flavor:b}),q.append({destination:p}),f){var r={frequency:{frequency_type:g,interval:f}};void 0!==h&&""!=h&&h>0&&(r.occurrences=h);var s=r;q.append({schedule:s})}return j&&j.credentials&&(q.append({credentials:j.credentials}),q.append({credentials_license:j.credentials_license}),q.append({credentials_policy:j.credentials_policy})),a.doApiPost(k,q)}function d(c){b.debug("deleting connector {0}",[c]);var d="connector/"+encodeURIComponent(c)+"/v1";return a.doApiDelete(d)}function e(c){b.debug("retrieveConfig {0}",[c]);var d=new ReqQueryParams;d.append({output:"config_attributes"});var e="connector/"+encodeURIComponent(c)+"/config/v1";return a.doApiGet(e,d)}function f(c){b.debug("connectorStatus {0}",[c]);var d="connector/"+encodeURIComponent(c)+"/status/v1";return a.doApiGet(d)}function g(b,c,d,e){var f="connector/"+encodeURIComponent(b)+"/v1",g=new ReqBodyData;if(null!==c&&void 0!==c&&g.append({config:c}),e.enabled){var h={frequency:{frequency_type:e.units,interval:e.interval}};e.limitOccurrences&&(h.occurrences=e.occurrences),g.append({schedule:h})}if(void 0!=d){var i={action:m.ADD_TO_INDEX,index:d};g.append({destination:i})}return a.doApiPut(f,g)}function h(b,c){var d="connector/"+encodeURIComponent(b)+"/start/v1",e=new ReqBodyData;return c&&e.append({ignore_previous_state:!0}),a.doApiPost(d,e)}function i(b){var c="connector/"+encodeURIComponent(b)+"/stop/v1";return a.doApiPost(c)}function j(b){var c="connector/"+encodeURIComponent(b)+"/cancelschedule/v1";return a.doApiPost(c,params)}function k(b){var c="connector/"+encodeURIComponent(b)+"/history/v1";return a.doApiGet(c,params)}b=b.getInstance("IodConnectorService");var l={WEB:"web_cloud",FS:"filesystem_onsite",SHAREPOINT:"remote_sharepoint_onsite",DROPBOX:"dropbox_cloud"},m={ADD_TO_INDEX:"addtotextindex"},n={createConnector:c,deleteConnector:d,updateConnector:g,startConnector:h,stopConnector:i,connectorStatus:f,retrieveConfig:e,cancelConnectorSchedule:j,connectorHistory:k};return n}function IodIndexService(a,b,c){function d(a,b,d,e,f,g){var h="textindex/"+encodeURIComponent(a)+"/v1",i=new ReqBodyData;return i.append({flavor:b,description:d,index_fields:e,parametric_fields:f,expiretime:g}),c.doApiPost(h,i)}function e(d){var e=b.defer(),g="textindex/"+encodeURIComponent(d)+"/v1";return c.doApiDelete(g).success(function(b){var c=b.confirm;a.debug("confirming deleting text index {0}",[d]),f(d,c).success(function(b){a.debug("Index {0} deleted ",[d]),e.resolve(b)}).error(function(b){a.debug("Failed to delete Index {0}",[d]),e.reject(b)})}).error(function(b){a.debug("Failed to receive delete confirmation code for Index {0} ",[d]),e.reject(b)}),e.promise}function f(a,b){var d=new ReqQueryParams;d.append({confirm:b});var e="textindex/"+encodeURIComponent(a)+"/v1";return c.doApiDelete(e,d,null)}function g(){}function h(a,d,e){var f=b.defer();try{var g=new FormData;if(g.append("file",d),!a||!_.isString(a))throw new Error("Expected indexName to be defined and a String");var h="textindex/"+encodeURIComponent(a)+"/document/v1",i=_.extend(e,{transformRequest:angular.identity,headers:{"Content-Type":void 0}});c.doApiPostWithoutDataValidation(h,g,null,i).success(function(a){f.resolve(a)}).error(function(a){f.reject(a)})}catch(j){f.reject(j)}return f.promise}function i(){}function j(a){var b="textindex/"+encodeURIComponent(a)+"/status/v1";return c.doApiGet(b)}function k(){var a=new ReqQueryParams;return a.append({type:m.INDEX_TYPES.INDEX}),a.append({flavor:m.INDEX_FLAVORS.STANDARD}),c.doApiGet("resource/v1",a)}function l(){return c.doApiGet("resource/v1")}a=a.getInstance("IodIndexService");var m={INDEX_FLAVORS:{SMALL:"explorer",STANDARD:"standard",CATEGORIZATION:"categorization"},INDEX_TYPES:{INDEX:"content",CONNECTOR:"connector"}},n={createIndex:d,deleteIndex:e,restoreIndex:g,addToTextIndex:h,deleteFromTextIndex:i,indexStatus:j,retrieveIndexesList:k,retrieveResourcesList:l};return n}function IodQueryProfileService(a,b){function c(a,c,d){var e="queryprofile/"+encodeURIComponent(a)+"/v1",f={query_manipulation_index:c,promotions_enabled:!0,promotion_categories:d,promotions_identified:!0,synonyms_enabled:!0,synonym_categories:d,blacklists_enabled:!0,blacklist_categories:d},g=new ReqBodyData;return g.append(f),b.doApiPost(e,g)}function d(a){var c="queryprofile/"+encodeURIComponent(a)+"/v1",d=new ReqBodyData;return b.doApiDelete(c,d)}function e(a){var c="queryprofile/"+encodeURIComponent(a)+"/v1",d=new ReqBodyData;return b.doApiPut(c,d)}function f(a){var c="queryprofile/"+encodeURIComponent(a)+"/v1";return b.doApiGet(c)}a=a.getInstance("IodQueryProfileService");var g={createQueryProfile:c,deleteQueryProfile:d,updateQueryProfile:e,retrieveQueryProfile:f};return g}function IodSearchService(a,b,c){function d(a,b,d,e,f){var g=new ReqQueryParams;if(g.append({text:a}),g.append({maxPageResults:j.MAX_PAGE_RESULTS}),g.append({total_results:!0}),g.append({summary:"context"}),g.append({highlight:"terms"}),g.append({start_tag:'<span class="highlightedTerm" ">'}),b){var h=b*j.MAX_PAGE_RESULTS+1;g.append({start:h}),g.append({absolute_max_results:j.ABSOLUTE_MAX_RESULTS+h})}else g.append({start:1}),g.append({absolute_max_results:j.ABSOLUTE_MAX_RESULTS});return d&&g.append({index:d}),e&&g.append({sort:e}),f&&g.append({min_date:f}),c.doApiGet("querytextindex/v1",g)}function e(a){var b=new ReqQueryParams;return b.append({index:a}),b.append({group_fields_by_type:!0}),c.doApiGet("textindex/query/fields/v1",b)}function f(a,b){var d=new ReqQueryParams;return d.append({text:a}),b&&d.append({indexes:b}),c.doApiGet("findrelatedconcepts/v1",d)}function g(a,b){return 0==a.length?!1:null==b?!1:!0}function h(){return c.doApiGet("queryprofile/v1")}function i(){return j.MAX_PAGE_RESULTS}var j={MAX_PAGE_RESULTS:10,ABSOLUTE_MAX_RESULTS:20},k={queryTextIndex:d,retrieveIndexFields:e,findRelatedConcepts:f,isQueryPhraseValid:g,listQueryProfiles:h,getQueryResultsPageSize:i};return k}function IodAuthService(a,b,c,d){function e(){var c=b.defer();return i.getUser().then(function(a){i.authApplication(a).success(function(a){i.authCombined(a.token).then(function(a){d.setSessionToken(a.token),i.removeTokenFromUrl(),i.ssoTokenDeffered.resolve(),i.getUserToken(),c.resolve()},function(a){i.ssoTokenDeffered.reject("Failed to retrieve the combined token "),c.reject(a)})}).error(function(a){i.ssoTokenDeffered.reject("Failed to retrieve the unbound token "),c.reject(a)})},function(b){a.debug("Failed to get users"),c.reject(b)}),c.promise}function f(){return i.ssoTokenDeffered.promise}function g(a){d.setApplicationName(a)}function h(a){d.setApplicationKey(a)}a=a.getInstance("IodAuthService");var i=this;i.ssoTokenDeffered=b.defer(),this.concatToken=function(a){return[a.type,a.id,a.secret].join(":")},this.authApplication=function(a){var b=d.getApplicationKey(),e=d.getApplicationName(),f=d.getApplicationDomain(),g={apiKey:b},h={name:e,domain:f,token:"simple"};return c.doPost("authenticate/application/unbound",h,g)},this.authCombined=function(e){var f=b.defer(),g=i.concatToken(e),h={app_token:g},j=d.getApplicationName(),k=d.getApplicationDomain(),l={token_type:"simple",application:j,domain:k};return c.doPost("authenticate/combined",l,h).success(function(a){f.resolve(a)}).error(function(b){a.error("failed to get combined token "+b),f.reject(b)}),f.promise},this.getUser=function(){var a=b.defer();return c.doGet("user").success(function(b){d.setUsersData(b),a.resolve(b)}).error(function(b){a.reject(b)}),a.promise},this.getUserToken=function(){var a=b.defer();return c.doPost("authenticate/user/unbound").success(function(b){try{d.setUserToken(b.token),a.resolve(b)}catch(c){a.reject(c)}}).error(function(b){a.reject(b)}),a.promise},this.removeTokenFromUrl=function(){""!==window.location.search&&(window.location.search="")};var j={authenticate:e,getSSOInitPromise:f,setApplicationName:g,setApplicationKey:h};return j}function IodDiscoveryService(a,b){function c(a){var c=new ReqQueryParams;return a&&c.append({flavors:a}),b.doDiscoveryGet("downloadLinks",c)}a=a.getInstance("IodDiscoveryService");var d={getConnectorAgentDownloadLinks:c};return d}function IodEnvConfigService(a,b){function c(){return f}function d(){return g}function e(){return h}b=b.getInstance("IodEnvConfigService");var f,g,h=!0;try{f=a.iod_config.protocol+"://"+a.iod_config.domain+(a.iod_config.port?":"+a.iod_config.port:""),g=a.portal_config.protocol+"://"+a.portal_config.domain+(a.portal_config.port?":"+a.portal_config.port:"")}catch(i){f="",g="",b.error("Configuration error! one of the IOD configuration attributes is missing"),h=!1}var j={getIodHost:c,getIodPortal:d,isEnvConfigValid:e};return j}function IodHttpService(a,b,c,d){function e(a){a.append({token:d.getSessionToken()})}function f(c,d){var e,f,g=q();return e=g+c,f=d instanceof ReqQueryParams?d:new ReqQueryParams(d),b.debug("performing a GET request to "+e),a({method:"GET",url:e,params:f.params})}function g(c,d,e){var f,g,h,i=q();return f=i+c,g=e instanceof ReqQueryParams?e:new ReqQueryParams(e),h=d instanceof ReqBodyData?d:new ReqBodyData(d),b.debug("performing a POST request to "+f),a({method:"POST",url:f,params:g.params,data:$.param(h.getSerializeParamaters()),headers:{"Content-Type":"application/x-www-form-urlencoded"}})}function h(c,d,e){var f,g,h,i=q();return f=i+c,g=d instanceof ReqQueryParams?d:new ReqQueryParams(d),h=e instanceof ReqBodyData?e:new ReqBodyData(e),b.debug("preforming a PUT request to "+f),a({method:"PUT",url:f,params:g.params,data:$.param(h.getSerializeParamaters()),headers:{"Content-Type":"application/x-www-form-urlencoded"}})}function i(c,d,e){var f,g,h,i=q();return f=i+c,g=d instanceof ReqQueryParams?d:new ReqQueryParams(d),h=e instanceof ReqBodyData?e:new ReqBodyData(e),b.debug("preforming a DELETE request to "+f),a({method:"DELETE",url:f,params:g.params,data:$.param(h.getSerializeParamaters()),headers:{"Content-Type":"application/x-www-form-urlencoded"}})}function j(a,c){var d,g=s(a);return d=c instanceof ReqQueryParams?c:new ReqQueryParams(c),e(d),b.debug("calling INFO get to "+g),f(g,d)}function k(a,c){var d,g=t(a);return d=c instanceof ReqQueryParams?c:new ReqQueryParams(c),e(d),b.debug("calling DISCOVERY get to "+g),f(g,d)}function l(a,c,d,g){var h,i=r(a,g);return h=c instanceof ReqQueryParams?c:new ReqQueryParams(c),e(h),b.debug("calling API get to "+i+", with :"+d),f(i,h)}function m(a,c,d,f){var h,i=r(a,f);return h=d instanceof ReqQueryParams?d:new ReqQueryParams(d),e(h),b.debug("calling API POST to "+i),g(i,c,h)}function n(c,d,f,g,h){var i,j;d=d||{},g=g||{},i=f instanceof ReqQueryParams?f:new ReqQueryParams(f),e(i),j=[q(),r(c,h)].join(""),b.debug("performing a POST request to "+j);var k=_.extend({method:"POST",url:j,params:i.params,data:d},g);return a(k)}function o(a,c,d,f){var g,i=r(a,f);return g=d instanceof ReqQueryParams?d:new ReqQueryParams(d),e(g),b.debug("calling API PUT to "+i),h(i,g,c)}function p(a,c,d,f){var g,h=r(a,f);return g=c instanceof ReqQueryParams?c:new ReqQueryParams(c),e(g),b.debug("calling API PUT to "+h),i(h,g,d)}function q(){return c.getIodHost()+"/"+v+"/"}function r(a,b){return b=b||!1,[w.API,b?y:x,a].join("/")}function s(a){return[w.INFO,a].join("/")}function t(a){return[w.DISCOVERY,a].join("/")}b=b.getInstance("IodHttpService");var u=this;u.sessionToken=null;var v=2,w={API:"api",INFO:"info",DISCOVERY:"discovery"},x="sync",y="async",z={doApiGet:l,doApiPost:m,doApiPostWithoutDataValidation:n,doApiPut:o,doApiDelete:p,doInfoGet:j,doDiscoveryGet:k,doGet:f,doPost:g,doPut:h,doDelete:i};return z}function IodInfoService(a,b){function c(){return b.doInfoGet("quota/project/")}function d(){return b.doInfoGet("quota/indexflavors/")}a=a.getInstance("IodInfoService");var e={getProjectQuotas:c,getIndexFlavorsQuota:d};return e}function IodSessionToken(a){function b(a){o.sessionToken=angular.copy(a),o.sessionTokenConcated=e(o.sessionToken)}function c(){return o.sessionTokenConcated}function d(){return o.sessionToken}function e(a){return[a.type,a.id,a.secret].join(":")}function f(a){var b;try{o.userData=angular.copy(a.users[0]),b=a.users[0].user_store.split(":")[0]}catch(c){b="IOD-TEST-DOMAIN"}o.setApplicationDomain(b)}function g(){return o.userData}function h(a){o.userToken=angular.copy(a)}function i(){return o.userToken}function j(a){o.applicationKey=angular.copy(a)}function k(){return o.applicationKey}function l(a){o.applicationName=angular.copy(a)}function m(){return o.applicationName}function n(){return o.applicationDomain}a=a.getInstance("IodSessionToken");var o=this;o.sessionToken=null,o.sessionTokenConcated=null,o.userToken=null,o.userData=null,o.applicationKey=null,o.applicationName=null,o.applicationDomain=null,this.setApplicationDomain=function(a){o.applicationDomain=angular.copy(a)};var p={setSessionToken:b,getSessionToken:c,getSessionTokenObj:d,setUsersData:f,getUsersData:g,setUserToken:h,getUserToken:i,setApplicationKey:j,getApplicationKey:k,setApplicationName:l,getApplicationName:m,getApplicationDomain:n};return p}function IodEventsService(a,b){function c(c,d,f){var g=new EventsQueryParams;return g.addApiNameParam("querytextindex"),g.addAggregationFuncParam(StatisticsQueryParams.AGGR_FUNC_TYPES.COUNT),g.addGroupByPeriodParam(d),void 0!=c&&g.addMinDateParam(c),g.addSortByParam(StatisticsQueryParams.SORT_OPTIONS.TIME_ASC),void 0!==f&&(g.addParamNameParam("indexes"),g.addParamValueParam(f)),a.debug("Calling eventsapistatistics for getSearchUseCount"),b.doApiGet(e,g)}function d(){var a=new EventsQueryParams;return a.addApiNameParam("querytextindex"),a.addAggregationFuncParam(StatisticsQueryParams.AGGR_FUNC_TYPES.COUNT),a.addGroupByUserId(!0),b.doApiGet(e,a)}a=a.getInstance("IodEventsService");var e="eventsapistatistics/v1",f={getSearchUseCount:c,getActiveUsers:d};return f}function IodMeasureService(a,b){function c(c,d){var e=new MeasureQueryParams;return e.addMeasureNameParam(n.QUERY_ZERO_HIT),e.addFuncParam(StatisticsQueryParams.AGGR_FUNC_TYPES.COUNT),e.addGroupByPeriodParam(d),e.addMinDateParam(c),e.addMaxPageResultsParam(o),e.addSortByParam(StatisticsQueryParams.SORT_OPTIONS.TIME_ASC),a.debug("Calling getZeroHitTermsForPeriod"),b.doApiGet(l,e)}function d(c){var d=new MeasureQueryParams;return d.addMeasureNameParam(n.QUERY_ZERO_HIT),d.addFuncParam(StatisticsQueryParams.AGGR_FUNC_TYPES.COUNT),d.addMinDateParamPeriodAgo(c),d.addShouldGroupByStringValueParam(!0),d.addSortByParam(StatisticsQueryParams.SORT_OPTIONS.DESC),a.debug("Calling getZeroHitTerms"),b.doApiGet(l,d)}function e(c){var d=new MeasureQueryParams;return d.addMeasureNameParam(n.PROMOTION_HIT),d.addFuncParam(StatisticsQueryParams.AGGR_FUNC_TYPES.COUNT),d.addMinDateParamPeriodAgo(c),d.addShouldGroupByObjectNameParam(!0),d.addShouldGroupByStringValueParam(!0),d.addSortByParam(StatisticsQueryParams.SORT_OPTIONS.DESC),a.debug("Calling getTopPromotions"),b.doApiGet(l,d)}function f(c){var d=new MeasureQueryParams;return d.addMeasureNameParam(n.TERM_HIT),d.addFuncParam(StatisticsQueryParams.AGGR_FUNC_TYPES.COUNT),d.addMinDateParamPeriodAgo(c),d.addShouldGroupByStringValueParam(!0),d.addSortByParam(StatisticsQueryParams.SORT_OPTIONS.DESC),a.debug("Calling getPopularSearchTerms"),b.doApiGet(l,d)}function g(c,d,e){var f=new MeasureQueryParams;return f.addMeasureNameParam(n.TOTAL_DOCS),f.addFuncParam(m.LAST),f.addGroupByPeriodParam(e),f.addMinDateParam(d),f.addMaxPageResultsParam(o),void 0!==c&&f.addObjectNameParam(c),a.debug("Calling getRecentDocCountForIndexGroupByPeriod"),b.doApiGet(l,f)}function h(a,c){var d=new MeasureQueryParams;return d.addMeasureNameParam(n.TOTAL_DOCS),d.addFuncParam(m.LAST),d.addShouldGroupByObjectNameParam(!0),c&&d.addMaxDateParam(c),void 0!==a&&d.addObjectNameParam(a),b.doApiGet(l,d)}function i(c,d){var e=new MeasureQueryParams;return e.addMeasureNameParam(n.INDEX_SIZE),e.addFuncParam(m.LAST),e.addGroupByPeriodParam(d),void 0!=c&&e.addMinDateParam(c),e.addMaxPageResultsParam(o),a.debug("Calling getRecentIndexSizePerIndexGroupByPeriod"),b.doApiGet(l,e)}function j(c,d){var e=new MeasureQueryParams;return e.addMeasureNameParam(n.INDEX_SIZE),e.addFuncParam(m.LAST),e.addShouldGroupByObjectNameParam(!0),void 0!==d&&e.addMaxDateParam(d),void 0!==c&&e.addObjectNameParam(c),e.addMaxPageResultsParam(o),e.addSortByParam(StatisticsQueryParams.SORT_OPTIONS.DESC),a.debug("Calling getRecentIndexSizePerIndex"),b.doApiGet(l,e)}function k(c,d,e){var f=new MeasureQueryParams;return f.addMeasureNameParam(n.INDEX_SIZE),f.addFuncParam(m.LAST),f.addGroupByPeriodParam(e),f.addMinDateParam(d),f.addObjectNameParam(c),f.addMaxPageResultsParam(o),a.debug("Calling getIndexSizeGroupByPeriod"),b.doApiGet(l,f)}a=a.getInstance("IodMeasureService");var l="eventsmeasurestatistics/v1",m={LAST:"last_by_object_name",NONE:"none"},n={TOTAL_DOCS:"total_documents",INDEX_SIZE:"total_index_size",TERM_HIT:"term_hit",QUERY_ZERO_HIT:"query_zero_hit_term",PROMOTION_HIT:"promotion_hit"},o=50,p={getZeroHitTermsForPeriod:c,getZeroHitTerms:d,getTopPromotions:e,getPopularSearchTerms:f,getRecentDocCountForIndexGroupByPeriod:g,getRecentDocCountUntilDatePerIndex:h,getRecentIndexSizePerIndexGroupByPeriod:i,getRecentIndexSizePerIndex:j,getIndexSizeGroupByPeriod:k};return p}function IodStatisticsService(a,b){function c(){return b.doApiGet("application/user/v1")}function d(c){var d=new ReqQueryParams;return d.append({indexes:c}),d.append({field_name:"content_type"}),d.append({document_count:!0}),a.debug("Calling getIndexDocTypesCount"),b.doApiGet("textindex/query/parametricvalues/v1",d)}a=a.getInstance("IodStatisticsService");var e={getApplicationUsers:c,getIndexDocTypesCount:d};return e}angular.module("iod-client",[]).config(["$httpProvider",function(a){a.defaults.withCredentials=!0}]),angular.module("envConfig",[]).provider("envConfig",function(){this.$get=function(){var a={},b=jQuery.ajax({type:"GET",url:"/config.json",cache:!1,async:!1,contentType:"application/json",dataType:"json"});return 200===b.status&&angular.extend(a,angular.fromJson(b.responseText)),a}}),ReqBodyData.prototype.append=function(a){var b=this;_.map(a,function(a,c){void 0!=a&&(b.params[c]=a)})},ReqBodyData.prototype.getSerializeParamaters=function(){var a=this,b={};return _.map(a.params,function(a,c){_.isObject(a)&&!_.isArray(a)?b[c]=JSON.stringify(a):b[c]=a}),b},ReqQueryParams.prototype.append=function(a){var b=this;_.map(a,function(a,c){void 0!=a&&(void 0===b.params[c]?b.params[c]=a:_.isArray(b.params[c])?b.params[c].push(a):b.params[c]=[b.params[c],a])})},ReqQueryParams.prototype.remove=function(a){var b=this;b.params[a]&&delete b.params[a]},EventsQueryParams.prototype=Object.create(StatisticsQueryParams.prototype),EventsQueryParams.prototype.constructor=EventsQueryParams,EventsQueryParams.prototype.addParamNameParam=function(a){this.append({param_name:a})},EventsQueryParams.prototype.addParamValueParam=function(a){this.append({param_value:a})},EventsQueryParams.prototype.addAggregationFuncParam=function(a){this.append({aggregation_function:a})},EventsQueryParams.prototype.addShouldGroupByApiValueParam=function(a){this.append({group_by_param_value:a})},MeasureQueryParams.prototype=Object.create(StatisticsQueryParams.prototype),MeasureQueryParams.prototype.constructor=MeasureQueryParams,MeasureQueryParams.prototype.addObjectNameParam=function(a){this.append({object_name:a})},MeasureQueryParams.prototype.addMeasureNameParam=function(a){this.append({measure_name:a})},MeasureQueryParams.prototype.addFuncParam=function(a){this.append({"function":a})},MeasureQueryParams.prototype.addShouldGroupByObjectNameParam=function(a){this.append({group_by_object_name:a})},MeasureQueryParams.prototype.addShouldGroupByStringValueParam=function(a){this.append({group_by_string_value:a})},MeasureQueryParams.prototype.addMinDateParamPeriodAgo=function(a){if(void 0!==a){var b=moment().subtract(1,a).toISOString();this.append({min_date:b})}},StatisticsQueryParams.prototype=Object.create(ReqQueryParams.prototype),StatisticsQueryParams.prototype.constructor=StatisticsQueryParams,StatisticsQueryParams.PERIODS={DAY:"day",WEEK:"week",MONTH:"month"},StatisticsQueryParams.AGGR_FUNC_TYPES={COUNT:"count(*)",SUM:"sum(measure)",MAX:"max(measure)",MIN:"min(measure)",AVG:"avg(measure)"},StatisticsQueryParams.SORT_OPTIONS={ASC:"measure_asc",DESC:"measure_desc",TIME_ASC:"time_granularity_asc",TIME_DESC:"time_granularity_desc"},StatisticsQueryParams.prototype.addApiNameParam=function(a){this.append({api_name:a})},StatisticsQueryParams.prototype.addGroupByPeriodParam=function(a){this.append({group_by_period:a})},StatisticsQueryParams.prototype.addGroupByUserId=function(a){this.append({group_by_user_id:a})},StatisticsQueryParams.prototype.addShouldGroupByApiNameParam=function(a){this.append({group_by_api_name:a})},StatisticsQueryParams.prototype.addMinDateParamPeriodAgo=function(a){if(void 0!==a){var b=moment().subtract(1,a).toISOString();this.append({min_date:b})}},StatisticsQueryParams.prototype.addMaxDateParam=function(a){if(void 0===a||!_.isDate(a)&&!a._isAMomentObject)throw new Error("date argument is invalid");var b=a.toISOString();this.append({max_date:b})},StatisticsQueryParams.prototype.addMinDateParam=function(a){if(void 0===a||!_.isDate(a)&&!a._isAMomentObject)throw new Error("date argument is invalid");var b=a.toISOString();this.append({min_date:b})},StatisticsQueryParams.prototype.addPageNumberParam=function(a){this.append({page_number:a})},StatisticsQueryParams.prototype.addMaxPageResultsParam=function(a){this.append({max_page_results:a})},StatisticsQueryParams.prototype.addSortByParam=function(a){this.append({sort_by:a})},StatisticsQueryParams.prototype.addShouldGroupByUserIdParam=function(a){this.append({group_by_user_id:a})},StatisticsQueryParams.prototype.addShouldGroupByApiKey=function(a){this.append({group_by_api_key:a})},angular.module("iod-client").factory("iodConnectorServiceNew",IodConnectorService),IodConnectorService.$inject=["iodHttpService","$log"],angular.module("iod-client").factory("iodIndexService",IodIndexService),IodIndexService.$inject=["$log","$q","iodHttpService"],angular.module("iod-client").factory("iodQueryProfileService",IodQueryProfileService),IodQueryProfileService.$inject=["$log","iodHttpService"],angular.module("iod-client").factory("iodSearchService",IodSearchService),IodSearchService.$inject=["$log","$q","iodHttpService"],angular.module("iod-client").factory("iodAuthService",IodAuthService),IodAuthService.$inject=["$log","$q","iodHttpService","iodSessionToken"],angular.module("iod-client").factory("iodDiscoveryService",IodDiscoveryService),IodDiscoveryService.$inject=["$log","iodHttpService"],angular.module("iod-client").factory("iodEnvConfigService",IodEnvConfigService),IodEnvConfigService.$inject=["envConfig","$log"],angular.module("iod-client").factory("iodHttpService",IodHttpService),IodHttpService.$inject=["$http","$log","iodEnvConfigService","iodSessionToken"],angular.module("iod-client").factory("iodInfoService",IodInfoService),IodInfoService.$inject=["$log","iodHttpService"],angular.module("iod-client").factory("iodSessionToken",IodSessionToken),IodSessionToken.$inject=["$log"],angular.module("iod-client").factory("iodEventsService",IodEventsService),IodEventsService.$inject=["$log","iodHttpService"],angular.module("iod-client").factory("iodMeasureService",IodMeasureService),IodMeasureService.$inject=["$log","iodHttpService"],angular.module("iod-client").factory("iodStatisticsService",IodStatisticsService),IodStatisticsService.$inject=["$log","iodHttpService"];